@inject UserStateService _state
@using DiscordApi.Services
@using FluentValidation.Results
@implements IDisposable

@code {

    protected ValidationResult? ValidationResult;

    protected UserStateService State => _state;

    protected override void OnInitialized()
    {
        State.OnChange += OnChangedHandler;
    }

    public void Dispose()
    {
        State.OnChange -= OnChangedHandler;
    }

    private async void OnChangedHandler()
    {
        await State.TryToken();
        await InvokeAsync(StateHasChanged);
    }

}